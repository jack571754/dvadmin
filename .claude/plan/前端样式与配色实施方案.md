# DVAdmin 前端样式与配色实施方案

> 更新时间：2026-02-08
> 设计理念：静谧科技 - 克制、专业、现代

---

## 一、方案概述

本方案为 DVAdmin 前端项目提供了一套完整的现代化样式和配色系统「静谧科技」，包含：

- **核心配色系统**：基于低饱和度蓝色主调的专业配色
- **设计系统变量**：间距、圆角、阴影、动画、字体、层级
- **组件样式覆盖**：40+ Element Plus 组件的现代化优化
- **布局主题样式**：顶栏、侧边栏、标签页、分栏布局
- **主题预设系统**：8 种预设主题快速切换
- **深色模式支持**：完整的深色模式适配

---

## 二、新增文件清单

### 1. 主题核心文件

| 文件路径 | 说明 | 依赖 |
|---------|------|------|
| `web/src/theme/presets.scss` | 主题预设与 CSS 变量系统 | 无 |
| `web/src/theme/modern.scss` | 现代化组件样式覆盖 | presets.scss |
| `web/src/theme/layout-theme.scss` | 布局组件主题样式 | presets.scss |
| `web/src/utils/themePresets.ts` | 主题切换工具函数 | 无 |

### 2. 文件说明

#### `presets.scss`
- 定义完整的 CSS 变量系统
- 包含浅色模式和深色模式变量
- 提供向后兼容的变量映射
- 包含 8 种预设主题类

#### `modern.scss`
- 40+ Element Plus 组件样式覆盖
- 按钮优化（悬浮态、焦点态）
- 卡片、表格、输入框现代化样式
- 通知、消息、警告框等反馈组件优化

#### `layout-theme.scss`
- 顶部导航栏样式
- 侧边栏菜单样式
- 标签页导航样式
- 分栏布局样式
- 设置面板样式
- 移动端适配

#### `themePresets.ts`
- 主题预设类型定义
- 主题切换函数
- 颜色计算工具
- 配置导入导出

---

## 三、实施步骤

### 步骤一：引入新样式文件

编辑 `web/src/theme/index.scss`，在文件开头添加新样式引入：

```scss
// 引入现代化主题预设（必须在其他样式之前）
@use './presets.scss';

// 引入现代化组件样式
@use './modern.scss';

// 引入布局主题样式
@use './layout-theme.scss';

// 以下是原有样式
@use './app.scss';
@use './common/transition.scss';
@use './other.scss';
@use './element.scss';
@use './media/media.scss';
@use './waves.scss';
@use './dark.scss';
@use './fa/css/font-awesome.min.css';
```

### 步骤二：更新主题配置 Store

编辑 `web/src/stores/themeConfig.ts`，更新默认配置：

```typescript
state: (): ThemeConfigState => ({
    themeConfig: {
        // ... 其他配置保持不变

        // 更新默认主题色
        primary: '#2563eb',  // 原 '#409eff'

        // 更新菜单配置（使用浅色菜单）
        menuBar: '#ffffff',       // 原 '#334054'
        menuBarColor: '#475569',  // 原 '#eaeaea'
        menuBarActiveColor: 'rgba(37, 99, 235, 0.1)',  // 更新悬浮色

        // 更新顶栏配置
        topBar: '#ffffff',
        topBarColor: '#475569',   // 原 '#606266'
    }
})
```

### 步骤三：添加主题切换功能（可选）

在设置面板中添加主题预设选择器：

```vue
<template>
  <div class="theme-preset-section">
    <div class="section-title">主题预设</div>
    <div class="preset-list">
      <div
        v-for="preset in presetList"
        :key="preset.key"
        class="preset-item"
        :class="{ 'is-active': currentPreset === preset.key }"
        @click="applyPreset(preset.key)"
      >
        <div class="preset-preview" :style="{ background: preset.preview }"></div>
        <div class="preset-info">
          <div class="preset-name">{{ preset.name }}</div>
          <div class="preset-desc">{{ preset.description }}</div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import { getThemePresetList, applyThemePreset, getCurrentPresetKey } from '@/utils/themePresets';

const presetList = getThemePresetList();
const currentPreset = ref('serenity');

const applyPreset = (key: string) => {
  applyThemePreset(key);
  currentPreset.value = key;
};

onMounted(() => {
  currentPreset.value = getCurrentPresetKey() || 'serenity';
});
</script>
```

---

## 四、主题预设列表

| 键名 | 名称 | 描述 | 主色 |
|------|------|------|------|
| `serenity` | 静谧蓝 | 专业、现代、冷静 | #2563eb |
| `forest` | 森之绿 | 自然、平和、清新 | #059669 |
| `twilight` | 暮光紫 | 优雅、神秘、创意 | #7c3aed |
| `sunset` | 日落橙 | 温暖、活力、友好 | #ea580c |
| `ocean` | 海洋青 | 清新、深邃、辽阔 | #0891b2 |
| `rose` | 玫瑰红 | 热情、优雅、浪漫 | #e11d48 |
| `lemon` | 柠檬黄 | 明亮、愉悦、活力 | #ca8a04 |
| `graphite` | 石墨灰 | 极简、纯粹、经典 | #374151 |
| `dark` | 深色模式 | 护眼、沉浸、专业 | #1e293b |

---

## 五、CSS 变量速查

### 主色调

```scss
--primary-base      // 主色基础值
--primary-hover     // 主色悬浮态
--primary-active    // 主色激活态
--primary-light     // 主色浅色态
--primary-lighter   // 主色更浅
--primary-lightest  // 主色极浅
```

### 功能色

```scss
--success-base / --success-hover / --success-active
--warning-base / --warning-hover / --warning-active
--danger-base / --danger-hover / --danger-active
--info-base / --info-hover / --info-active
```

### 背景色（浅色模式）

```scss
--bg-page       // 页面背景 #fafbfc
--bg-surface    // 表面背景 #ffffff
--bg-elevated   // 抬升表面 #ffffff
--bg-muted      // 静音背景 #f1f5f9
--bg-hover      // 悬浮背景 rgba(15,23,42,0.04)
--bg-active     // 激活背景 rgba(15,23,42,0.08)
```

### 边框色

```scss
--border-base     // 基础边框 #e2e8f0
--border-muted    // 静音边框 #f1f5f9
--border-strong   // 强调边框 #cbd5e1
--border-focus    // 焦点边框 --primary-base
```

### 文字色

```scss
--text-primary    // 主要文字 #0f172a
--text-secondary  // 次要文字 #475569
--text-tertiary   // 辅助文字 #64748b
--text-muted      // 静音文字 #94a3b8
--text-disabled   // 禁用文字 #cbd5e1
```

### 间距（8px 基准）

```scss
--spacing-1: 4px
--spacing-2: 8px
--spacing-3: 12px
--spacing-4: 16px
--spacing-6: 24px
--spacing-8: 32px
```

### 圆角

```scss
--radius-sm: 4px
--radius-md: 6px
--radius-lg: 8px
--radius-xl: 12px
```

### 阴影

```scss
--shadow-sm  // 小阴影
--shadow-md  // 中阴影
--shadow-lg  // 大阴影
--shadow-focus // 焦点阴影
```

### 动画

```scss
--duration-fast: 150ms
--duration-base: 200ms
--duration-slow: 300ms
--ease-default: cubic-bezier(0.4, 0, 0.2, 1)
```

---

## 六、深色模式变量

```scss
// 背景色
--bg-page: #0f172a
--bg-surface: #1e293b
--bg-elevated: #334155

// 文字色
--text-primary: #f1f5f9
--text-secondary: #cbd5e1

// 边框色
--border-base: #334155
```

---

## 七、兼容性说明

### 向后兼容的变量映射

新系统保留了现有变量名的映射，确保原有代码不受影响：

```scss
// next-* 变量映射
--next-bg-main-color => --bg-page
--next-color-white => --bg-surface
--next-border-color-light => --border-base

// el-* 变量映射
--el-color-primary => --primary-base
--el-text-color-primary => --text-primary
--el-border-color => --border-base
```

### 渐进式采用

你可以选择性地使用新变量：

1. **仅使用新配色**：引入 `presets.scss`，使用 `--primary-base` 等变量
2. **使用新组件样式**：引入 `modern.scss`，自动应用组件优化
3. **完整采用**：引入所有文件，使用完整的设计系统

---

## 八、常见问题

### Q1: 如何自定义主题色？

**A:** 在组件中动态设置 CSS 变量：

```typescript
document.documentElement.style.setProperty('--primary-base', '#ff6b6b');
```

### Q2: 如何切换深色模式？

**A:** 设置 `data-theme` 属性：

```typescript
// 开启深色模式
document.documentElement.setAttribute('data-theme', 'dark');

// 关闭深色模式
document.documentElement.removeAttribute('data-theme');
```

### Q3: 主题预设是否会持久化？

**A:** 默认不会持久化。如需持久化，请在 `applyThemePreset` 后保存到 localStorage：

```typescript
const presetKey = 'serenity';
applyThemePreset(presetKey);
localStorage.setItem('theme-preset', presetKey);
```

### Q4: 如何回滚到原有样式？

**A:** 从 `index.scss` 中移除新增的引入即可：

```scss
// 注释掉新增的引入
// @use './presets.scss';
// @use './modern.scss';
// @use './layout-theme.scss';
```

---

## 九、视觉预览

### 配色对比

| 元素 | 原配色 | 新配色 |
|------|--------|--------|
| 主色 | #409eff | #2563eb |
| 菜单背景 | #334054（深色） | #ffffff（浅色） |
| 菜单文字 | #eaeaea | #475569 |
| 页面背景 | #f8f8f8 | #fafbfc |
| 边框 | #f1f2f3 | #e2e8f0 |
| 圆角 | 4px | 6-8px |

### 关键改进

1. **主色饱和度降低**：更加专业、不刺眼
2. **菜单采用浅色设计**：符合现代设计趋势
3. **精细的灰度系统**：5 级灰度替代原有 2 级
4. **柔和的圆角**：统一使用 6/8/12px
5. **自然的多层阴影**：营造深度感

---

## 十、后续扩展

### 计划中的功能

- [ ] 添加更多预设主题（如「樱花粉」、「薄荷绿」）
- [ ] 支持自定义主题编辑器
- [ ] 主题市场（用户可分享自定义主题）
- [ ] 暗色模式自动切换（跟随系统）
- [ ] 高对比度模式（无障碍支持）

### 贡献指南

如需添加新主题预设，请：

1. 在 `themePresets.ts` 中添加新预设
2. 在 `presets.scss` 中添加对应的主题类
3. 更新本文档的主题列表

---

**文档版本：** v1.0.0
**创建日期：** 2026-02-08
**设计师：** Claude AI
**适用于：** DVAdmin v3.2.0+
