# 文章管理编辑按钮显示问题修复

> 创建时间：2026-02-02
> 任务描述：文章管理页面看不到操作编辑按钮

---

## 问题分析

### 根本原因
数据库中缺少博客模块的菜单和按钮权限数据：
- 只有父菜单"博客管理"（id=45, web_path='/blog'）
- **缺少子菜单"文章管理"**（component_name='blog:article'）
- **缺少按钮权限** `blog:article:Update`
- 管理员角色未分配博客相关权限

### 权限流程断链
```
用户登录 → 获取按钮权限 → 数据库查询返回空列表
                                         ↓
                          auth('blog:article:Update') = false
                                         ↓
                          编辑按钮 show: false ❌
```

---

## 执行计划

### 步骤 1：运行博客菜单初始化命令
- **命令**：`python manage.py init_blog_menu`
- **说明**：脚本已实现幂等性，使用 `update_or_create`，可重复执行
- **预期输出**：
  - `[OK]` = 新创建
  - `[UP]` = 已存在并更新
  - `[DEL]` = 删除多余数据

### 步骤 2：验证数据库
- 确认父菜单"博客管理"存在
- 确认子菜单"文章管理"存在
- 确认按钮权限 `blog:article:Update` 存在
- 确认管理员角色已分配权限

### 步骤 3：清除缓存并重新登录
- 清除浏览器缓存（Ctrl+Shift+Delete）
- 重新登录系统
- 访问文章管理页面

### 步骤 4：验证编辑按钮显示
- 检查编辑按钮是否显示
- 验证点击编辑按钮功能正常

---

## 相关文件

- **初始化脚本**：`backend/dvadmin/blog/management/commands/init_blog_menu.py`
- **前端页面**：`web/src/views/blog/article/index.vue`
- **CRUD 配置**：`web/src/views/blog/article/crud.tsx`
- **权限函数**：`web/src/utils/authFunction.ts`
